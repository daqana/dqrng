<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fast Pseudo Random Number Generators • dqrng</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Fast Pseudo Random Number Generators">
<meta property="og:description" content="Several fast random number generators are provided as C++
  header only libraries: The PCG family by ONeill (2014
  &lt;https://www.cs.hmc.edu/tr/hmc-cs-2014-0905.pdf&gt;) as well as
  Xoroshiro128+ and Xoshiro256+ by Blackman and Vigna (2018
  &lt;arXiv:1805.01407&gt;). In addition fast functions for generating random
  numbers according to a uniform, normal and exponential distribution
  are included. The latter two use the Ziggurat algorithm originally
  proposed by Marsaglia and Tsang (2000, &lt;doi:10.18637/jss.v005.i08&gt;).
  These functions are exported to R and as a C++ interface and are
  enabled for use with the default 64 bit generator from the PCG family,
  Xoroshiro128+ and Xoshiro256+ as well as the 64 bit version of the 20 rounds
  Threefry engine (Salmon et al., 2011 &lt;doi:10.1145/2063384.2063405&gt;) as
  provided by the package sitmo'.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">dqrng</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/dqrng.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/cpp-api.html">C++ API</a>
    </li>
    <li>
      <a href="articles/parallel.html">Parallel RNG usage</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/daqana/dqrng/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div id="dqrng" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#dqrng" class="anchor"></a>dqrng</h1></div>
<p>The dqrng package provides fast random number generators (RNG) with good statistical properties for usage with R. It combines these RNGs with fast distribution functions to sample from uniform, normal or exponential distributions. Both the RNGs and the distribution functions are distributed as C++ header-only library.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The currently released version is available from CRAN via</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"dqrng"</span><span class="op">)</span></code></pre></div>
<p>Intermediate releases can also be obtained via <a href="https://cran.r-project.org/package=drat">drat</a>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html">requireNamespace</a></span><span class="op">(</span><span class="st">"drat"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"drat"</span><span class="op">)</span>
<span class="fu">drat</span><span class="fu">::</span><span class="fu">addRepo</span><span class="op">(</span><span class="st">"daqana"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"dqrng"</span><span class="op">)</span></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>Using the provided RNGs from R is deliberately similar to using R’s build-in RNGs:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://daqana.github.io/dqrng/">dqrng</a></span><span class="op">)</span>
<span class="fu"><a href="reference/dqRNGkind.html">dqset.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span>
<span class="fu"><a href="reference/dqRNGkind.html">dqrunif</a></span><span class="op">(</span><span class="fl">5</span>, min <span class="op">=</span> <span class="fl">2</span>, max <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt; [1] 9.211802 2.616041 6.236331 4.588535 5.764814</span>
<span class="fu"><a href="reference/dqRNGkind.html">dqrexp</a></span><span class="op">(</span><span class="fl">5</span>, rate <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.35118613 0.17656197 0.06844976 0.16984095 0.10096744</span></code></pre></div>
<p>They are quite a bit faster, though:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">N</span> <span class="op">&lt;-</span> <span class="fl">1e4</span>
<span class="va">bm</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu">mark</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span>, <span class="fu"><a href="reference/dqRNGkind.html">dqrnorm</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span>, check <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">bm</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>
<span class="co">#&gt; # A tibble: 2 x 4</span>
<span class="co">#&gt;   expression      min   median `itr/sec`</span>
<span class="co">#&gt;   &lt;bch:expr&gt; &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 rnorm(N)    598.9µs    670µs     1414.</span>
<span class="co">#&gt; 2 dqrnorm(N)   85.5µs     89µs     9663.</span></code></pre></div>
<p>This is also true for the provided sampling functions with replacement:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">m</span> <span class="op">&lt;-</span> <span class="fl">1e7</span>
<span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">1e5</span>
<span class="va">bm</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu">mark</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample.int</a></span><span class="op">(</span><span class="va">m</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
                  <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample.int</a></span><span class="op">(</span><span class="fl">1e3</span><span class="op">*</span><span class="va">m</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
                  <span class="fu"><a href="reference/dqsample.html">dqsample.int</a></span><span class="op">(</span><span class="va">m</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
                  <span class="fu"><a href="reference/dqsample.html">dqsample.int</a></span><span class="op">(</span><span class="fl">1e3</span><span class="op">*</span><span class="va">m</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
                  check <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">bm</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>
<span class="co">#&gt; # A tibble: 4 x 4</span>
<span class="co">#&gt;   expression                                     min   median `itr/sec`</span>
<span class="co">#&gt;   &lt;bch:expr&gt;                                &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 sample.int(m, n, replace = TRUE)            6.94ms   7.52ms      131.</span>
<span class="co">#&gt; 2 sample.int(1000 * m, n, replace = TRUE)      8.8ms   9.64ms      101.</span>
<span class="co">#&gt; 3 dqsample.int(m, n, replace = TRUE)        304.75µs 444.96µs     2207.</span>
<span class="co">#&gt; 4 dqsample.int(1000 * m, n, replace = TRUE) 397.96µs 675.24µs     1502.</span></code></pre></div>
<p>And without replacement:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bm</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu">mark</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample.int</a></span><span class="op">(</span><span class="va">m</span>, <span class="va">n</span><span class="op">)</span>,
                  <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample.int</a></span><span class="op">(</span><span class="fl">1e3</span><span class="op">*</span><span class="va">m</span>, <span class="va">n</span><span class="op">)</span>,
                  <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample.int</a></span><span class="op">(</span><span class="va">m</span>, <span class="va">n</span>, useHash <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
                  <span class="fu"><a href="reference/dqsample.html">dqsample.int</a></span><span class="op">(</span><span class="va">m</span>, <span class="va">n</span><span class="op">)</span>,
                  <span class="fu"><a href="reference/dqsample.html">dqsample.int</a></span><span class="op">(</span><span class="fl">1e3</span><span class="op">*</span><span class="va">m</span>, <span class="va">n</span><span class="op">)</span>,
                  check <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co">#&gt; Warning: Some expressions had a GC in every iteration; so filtering is disabled.</span>
<span class="va">bm</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>
<span class="co">#&gt; # A tibble: 5 x 4</span>
<span class="co">#&gt;   expression                            min   median `itr/sec`</span>
<span class="co">#&gt;   &lt;bch:expr&gt;                       &lt;bch:tm&gt; &lt;bch:tm&gt;     &lt;dbl&gt;</span>
<span class="co">#&gt; 1 sample.int(m, n)                  38.59ms  51.73ms      19.6</span>
<span class="co">#&gt; 2 sample.int(1000 * m, n)           11.98ms  15.34ms      63.9</span>
<span class="co">#&gt; 3 sample.int(m, n, useHash = TRUE)   9.94ms  12.73ms      71.5</span>
<span class="co">#&gt; 4 dqsample.int(m, n)               942.04µs   1.05ms     755. </span>
<span class="co">#&gt; 5 dqsample.int(1000 * m, n)          1.86ms   2.44ms     315.</span></code></pre></div>
<p>Note that sampling from <code>10^10</code> elements triggers “long-vector support” in R.</p>
<p>In addition the RNGs provide support for multiple independent streams for parallel usage:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">N</span> <span class="op">&lt;-</span> <span class="fl">1e7</span>
<span class="fu"><a href="reference/dqRNGkind.html">dqset.seed</a></span><span class="op">(</span><span class="fl">42</span>, <span class="fl">1</span><span class="op">)</span>
<span class="va">u1</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/dqRNGkind.html">dqrunif</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span>
<span class="fu"><a href="reference/dqRNGkind.html">dqset.seed</a></span><span class="op">(</span><span class="fl">42</span>, <span class="fl">2</span><span class="op">)</span>
<span class="va">u2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/dqRNGkind.html">dqrunif</a></span><span class="op">(</span><span class="va">N</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">u1</span>, <span class="va">u2</span><span class="op">)</span>
<span class="co">#&gt; [1] -0.0005787967</span></code></pre></div>
</div>
<div id="feedback" class="section level2">
<h2 class="hasAnchor">
<a href="#feedback" class="anchor"></a>Feedback</h2>
<p>All feedback (bug reports, security issues, feature requests, …) should be provided as <a href="https://github.com/daqana/dqrng/issues">issues</a>.</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=dqrng">https://​cloud.r-project.org/​package=dqrng</a>
</li>
<li>Browse source code at <br><a href="https://github.com/daqana/dqrng/">https://​github.com/​daqana/​dqrng/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/daqana/dqrng/issues">https://​github.com/​daqana/​dqrng/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/AGPL-3">AGPL-3</a> | file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Ralf Stubner <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/daqana/dqrng/actions"><img src="https://github.com/daqana/dqrng/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://cran.r-project.org/package=dqrng"><img src="https://www.r-pkg.org/badges/version/dqrng" alt="CRAN status"></a></li>
<li><a href="https://codecov.io/github/daqana/dqrng?branch=master"><img src="https://codecov.io/gh/daqana/dqrng/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
<li><a href="https://www.r-pkg.org/pkg/dqrng"><img src="https://cranlogs.r-pkg.org/badges/dqrng?color=brightgreen" alt="Downloads"></a></li>
<li><a href="https://bestpractices.coreinfrastructure.org/projects/2157"><img src="https://bestpractices.coreinfrastructure.org/projects/2157/badge" alt="CII Best Practices"></a></li>
<li><a href="https://cran.r-project.org/package=dqrng"><img src="https://tinyverse.netlify.com/badge/dqrng" alt="Dependencies"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Ralf Stubner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
